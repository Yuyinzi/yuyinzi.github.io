<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Python拾遗(2) | Yuyinzi&#39;s note</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="包括Python中的常用数据类型。">
<meta name="keywords" content="Python">
<meta property="og:type" content="article">
<meta property="og:title" content="Python拾遗(2)">
<meta property="og:url" content="http://yuyinzi.github.io/2019/04/10/Python拾遗-2/index.html">
<meta property="og:site_name" content="Yuyinzi&#39;s note">
<meta property="og:description" content="包括Python中的常用数据类型。">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-04-12T07:27:26.222Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python拾遗(2)">
<meta name="twitter:description" content="包括Python中的常用数据类型。">
  
    <link rel="alternate" href="/atom.xml" title="Yuyinzi&#39;s note" type="application/atom+xml">
  
  
    <link rel="icon" href="/may.jpeg">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yuyinzi.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Yuyinzi&#39;s note</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Python拾遗-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/10/Python拾遗-2/" class="article-date">
  <time datetime="2019-04-10T08:03:16.000Z" itemprop="datePublished">2019-04-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Python拾遗(2)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>包括<code>Python</code>中的常用数据类型。<br><a id="more"></a></p>
<h2 id="int"><a href="#int" class="headerlink" title="int"></a><code>int</code></h2><p>在<code>64</code>位平台上，<code>int</code>类型是<code>64</code>位整数：</p>
<ul>
<li>从堆上按需申请名为<code>PyIntBlcok</code>的缓存区域存储整数对象</li>
<li>使用固定数组缓存<code>[-5， 257]</code>之间的小数字，只需计算下标就能获得指针</li>
<li><code>PyIntBlock</code>内存不会返还给操作系统，直至进程结束</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">15</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">15</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">1000</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">1000</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p>根据第三点，如果使用<code>range</code>创建巨大的数字列表，这就需要很大内存空间。但是换成<code>xrange</code>，每次迭代之后数字对象被回收，其占用内存空间出来并被复用，内存就不会暴涨。(仅指<code>python2</code>)。<br>当超出<code>int</code>限制时，会自动转换成为<code>long</code>。</p>
<h2 id="float"><a href="#float" class="headerlink" title="float"></a><code>float</code></h2><p>在<code>python2</code>中，<code>/</code>默认返回整数，而<code>python3</code>中默认返回浮点数。如果需要准确控制运算精度，有效位数和<code>round</code>的结果，使用<code>Decimal</code>代替。(但是建议往<code>Decimal</code>传入字符串型的浮点数 – (为什么你需要少看垃圾博客以及如何在Python里精确地四舍五入)[<a href="https://zhuanlan.zhihu.com/p/60952919]" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/60952919]</a>)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> decimal <span class="keyword">import</span> Decimal, ROUND_UP, ROUND_DOWN</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>float(<span class="string">'0.1'</span>) * <span class="number">3</span> == float(<span class="string">'0.3'</span>)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="string">'0.1'</span>) * <span class="number">3</span> == Decimal(<span class="string">'0.3'</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></p>
<h2 id="string"><a href="#string" class="headerlink" title="string"></a><code>string</code></h2><h3 id="不太熟的方法"><a href="#不太熟的方法" class="headerlink" title="不太熟的方法"></a>不太熟的方法</h3><ul>
<li><code>splitlines()</code>: 按行分割</li>
<li><code>find()</code>: 查找</li>
<li><code>lstrip()/rstrip()/strip()</code>: 剔除前后空格</li>
<li><code>replace()</code>：替换字符</li>
<li><code>expandtabs()</code>：将<code>tab</code>替换成空格</li>
<li><code>ljust()/rjust()/center()/zfill()</code>：填充<h3 id="字符编码"><a href="#字符编码" class="headerlink" title="字符编码"></a>字符编码</h3>在计算机内存中，统一使用<code>Unicode</code>编码，当需要保存到硬盘或者需要传输的时候，转换为<code>UTF-8</code>编码。<br><code>py3</code>：<blockquote>
<p>包括<code>bytes</code>和<code>str</code>。字节的实例包含<code>8</code>个原生比特值，字符串实例是由<code>Unicode</code>字符组成</p>
</blockquote>
</li>
</ul>
<p><code>py2</code>：</p>
<blockquote>
<p>包括<code>str</code>和<code>unicode</code>。字符串代表原生的<code>8</code>比特，而<code>unicode</code>由<code>Unicode</code>字符组成。</p>
</blockquote>
<p>因此代码中，最核心的部分应该使用<code>Unicode</code>字符类型，即<code>py3</code>中使用<code>str</code>，<code>py2</code>中使用<code>unicode</code>。这两种字符类型没有相关联的<em>二进制编码</em>(原生的<code>8</code>个比特值)，因此如果要将<code>Unicode</code>转换为二进制数据，应该使用<code>encode</code>方法。而反过来，如果要<em>二进制编码</em>转化为<code>Unicode</code>字符，必须使用<code>decode</code>方法。<br><code>py3</code>中的写法：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_str</span><span class="params">(bytes_or_str)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(bytes_or_str, bytes):</span><br><span class="line">        value = bytes_or_str.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        value = bytes_or_str</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_bytes</span><span class="params">(bytes_or_str)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(bytes_or_str, str):</span><br><span class="line">        value = bytes_or_str.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        value = bytes_or_str</span><br><span class="line">    <span class="keyword">return</span> value</span><br></pre></td></tr></table></figure></p>
<p><code>py2</code>中的写法：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_unicode</span><span class="params">(unicode_or_str)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(unicode_or_str, str):</span><br><span class="line">        value = unicode_or_str.decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        value = unicode_or_str</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_str</span><span class="params">(unicode_or_str)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(unicode_or_str, unicode):</span><br><span class="line">        value = unicode_or_str.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        value = unicode_or_str</span><br><span class="line">    <span class="keyword">return</span> value</span><br></pre></td></tr></table></figure></p>
<p>需要注意的是两大陷阱：</p>
<ul>
<li><p>在<code>py2</code>中，当一个<code>str</code>类型仅仅包含7个比特的<code>ASCII</code>码字符的时候，<code>unicode</code>和<code>str</code>实例看起来是一致的。因此可以采用：</p>
<ul>
<li><code>+</code>运算符合并<code>str</code>和<code>unicode</code></li>
<li>可以使用等价或者不等价运算符来比较<code>str</code>和<code>unicode</code>实例</li>
<li>可以使用<code>unicode</code>来替换像<code>%s</code>这种字符串中的格式化占位符<blockquote>
<p>然而在<code>py3</code>中，<code>bytes</code>和<code>str</code>的实例是不可能等价的。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>在<code>py3</code>中，涉及到文件的处理操作，例如采用内置的<code>open</code>函数，会默认以<code>utf8</code>编码，而在<code>py2</code>中默认采用二进制的形式编码。举个例子，在<code>py3</code>的情况下，会报错：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">open</span><span class="params">(<span class="string">'/tmp/random.bin'</span>,<span class="string">'w'</span>)</span> <span class="title">as</span> <span class="title">f</span>:</span></span><br><span class="line">    f.write(os.urandom(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">TypeError: must be str,<span class="keyword">not</span> bytes</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>这是因为<code>py3</code>中对于<code>open</code>函数新增了名为<code>encoding</code>的参数，并且此参数默认值为<code>utf-8</code>。因此，其对文件的源的期望是包含了<code>unicode</code>字符串的<code>str</code>实例，而不是包含了二进制的<code>bytes</code>文件。因此，可以采用<code>py2</code>与<code>py3</code>中都通用的方法：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'/tmp/random.bin'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(os.urandom(<span class="number">10</span>))</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><strong>画重点</strong></p>
<ul>
<li><code>py3</code>中，<code>bytes</code>是包含<code>8</code>个比特位的序列，<code>str</code>是包含<code>unicode</code>的字符串，它们不能同时出现在操作符<code>&gt;</code>或者<code>+</code>中。</li>
<li><code>py2</code>中，<code>str</code>是包含<code>8</code>个比特位的序列，而<code>unicode</code>是包含<code>unicode</code>的字符串，二者可以同时出现在只包含7个比特的<code>ASCII</code>码的运算中。</li>
<li>使用工具函数来确保程序输入的数据是程序预期的类型，例如上面的<code>to_str</code>之类的函数。</li>
<li>总是使用<code>wb</code>和<code>rb</code>模式来处理文件。</li>
</ul>
<h3 id="string-ascii-letters-digits"><a href="#string-ascii-letters-digits" class="headerlink" title="string.ascii_letters/digits"></a><code>string.ascii_letters/digits</code></h3><p>使用<code>string</code>类的<code>ascii_letters</code>或者<code>digits</code>可以获得大小写字符，以及数字，避免自己写循环生成：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> string</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>string.ascii_letters</span><br><span class="line"><span class="string">'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(string.ascii_letters)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">str</span>'&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">string</span>.<span class="title">digits</span></span></span><br><span class="line"><span class="class">'0123456789'</span></span><br></pre></td></tr></table></figure></p>
<h4 id="池化"><a href="#池化" class="headerlink" title="池化"></a>池化</h4><p>使用<code>intern()</code>可以把运行期动态生成的字符串池化：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">""</span>.join([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s <span class="keyword">is</span> <span class="string">"abc"</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>intern(s) <span class="keyword">is</span> <span class="string">"abc"</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></p>
<h2 id="dict"><a href="#dict" class="headerlink" title="dict"></a><code>dict</code></h2><ul>
<li><p><code>popitem()</code></p>
<blockquote>
<p>随机返回并删除字典中的一对键值</p>
</blockquote>
</li>
<li><p><code>setdefault(key, default=None)</code></p>
<blockquote>
<p>如果字典中包含有给定键，则返回键对应的值，否则返回为该键设置的值。</p>
</blockquote>
</li>
<li><p><code>fromkeys(it, [initial])</code></p>
<blockquote>
<p>返回以可迭代对象<code>it</code>里的元素为键值的字典，如果有<code>initial</code>参数，就把它作为这些键对应的值，默认是<code>None</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">104</span>]: info = &#123;&#125;.fromkeys([<span class="string">'name'</span>, <span class="string">'blog'</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">105</span>]: info</span><br><span class="line">Out[<span class="number">105</span>]: &#123;<span class="string">'blog'</span>: <span class="literal">None</span>, <span class="string">'name'</span>: <span class="literal">None</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">106</span>]: info = &#123;&#125;.fromkeys([<span class="string">'name'</span>, <span class="string">'blog'</span>], [<span class="string">'angel'</span>, <span class="string">'jay'</span>])</span><br><span class="line"></span><br><span class="line">In [<span class="number">107</span>]: info</span><br><span class="line">Out[<span class="number">107</span>]: &#123;<span class="string">'blog'</span>: [<span class="string">'angel'</span>, <span class="string">'jay'</span>], <span class="string">'name'</span>: [<span class="string">'angel'</span>, <span class="string">'jay'</span>]&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">110</span>]: info = &#123;&#125;.fromkeys([<span class="string">'name'</span>, <span class="string">'blog'</span>, <span class="string">'test'</span>], <span class="string">'angel'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">111</span>]: info</span><br><span class="line">Out[<span class="number">111</span>]: &#123;<span class="string">'blog'</span>: <span class="string">'angel'</span>, <span class="string">'name'</span>: <span class="string">'angel'</span>, <span class="string">'test'</span>: <span class="string">'angel'</span>&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p><code>update</code></p>
<blockquote>
<p>使用指定键值对更新字典</p>
</blockquote>
</li>
</ul>
<p>可以采用<code>key=value</code>的形式：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">112</span>]: info.update(blog=<span class="string">'jay'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">113</span>]: info</span><br><span class="line">Out[<span class="number">113</span>]: &#123;<span class="string">'blog'</span>: <span class="string">'jay'</span>, <span class="string">'name'</span>: <span class="string">'angel'</span>, <span class="string">'test'</span>: <span class="string">'angel'</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>也可以采用<code>{key:value}</code>的形式：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">114</span>]: info.update(&#123;<span class="string">'test'</span>:<span class="string">'album'</span>&#125;)</span><br><span class="line"></span><br><span class="line">In [<span class="number">115</span>]: info</span><br><span class="line">Out[<span class="number">115</span>]: &#123;<span class="string">'blog'</span>: <span class="string">'jay'</span>, <span class="string">'name'</span>: <span class="string">'angel'</span>, <span class="string">'test'</span>: <span class="string">'album'</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>也可以使用<code>tuple</code>的形式：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">119</span>]: info.update(((<span class="string">'name'</span>, <span class="string">'unkown'</span>),(<span class="string">'test'</span>, <span class="string">'secret'</span>)))</span><br><span class="line"></span><br><span class="line">In [<span class="number">120</span>]: info</span><br><span class="line">Out[<span class="number">120</span>]: &#123;<span class="string">'blog'</span>: <span class="string">'jay'</span>, <span class="string">'name'</span>: <span class="string">'unkown'</span>, <span class="string">'test'</span>: <span class="string">'secret'</span>&#125;</span><br></pre></td></tr></table></figure></p>
<p>对于大字典，调用<code>keys()</code>、<code>values()</code>、<code>items()</code>会同样构造巨大的列表，因此可以使用迭代器(<code>iterkeys()</code>、<code>itervalues()</code>、<code>iteritems()</code>)减少内存开销。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">"a"</span>:<span class="number">1</span>, <span class="string">"b"</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.iterkeys()</span><br><span class="line">&lt;dictionary-keyiterator object at <span class="number">0x7fde6e70b368</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.itervalues()</span><br><span class="line">&lt;dictionary-valueiterator object at <span class="number">0x7fde6e70b3c0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.iteritems()</span><br><span class="line">&lt;dictionary-itemiterator object at <span class="number">0x7fde6e70b368</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k, v <span class="keyword">in</span> d.iteritems():</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> k, v</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">a <span class="number">1</span></span><br><span class="line">b <span class="number">2</span></span><br></pre></td></tr></table></figure></p>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>判断两个字典间的差异，除了使用<code>Counter</code>，也可以使用视图。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d1 = dict(a=<span class="number">1</span>, b=<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d2 = dict(b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d1 &amp; d2</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unsupported operand type(s) <span class="keyword">for</span> &amp;: <span class="string">'dict'</span> <span class="keyword">and</span> <span class="string">'dict'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v1 = d1.viewitems()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v2 = d2.viewitems()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v1 &amp; v2</span><br><span class="line">set([(<span class="string">'b'</span>, <span class="number">2</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v1 | v2</span><br><span class="line">set([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v1 - v2</span><br><span class="line">set([(<span class="string">'a'</span>, <span class="number">1</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v1 ^ v2</span><br><span class="line">set([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br></pre></td></tr></table></figure></p>
<p>视图会和字典同步变更：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">"a"</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v = d.viewitems()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v</span><br><span class="line">dict_items([(<span class="string">'a'</span>, <span class="number">1</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">"b"</span>] = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v</span><br><span class="line">dict_items([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> d[<span class="string">"a"</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v</span><br><span class="line">dict_items([(<span class="string">'b'</span>, <span class="number">2</span>)])</span><br></pre></td></tr></table></figure></p>
<h3 id="collections-defaultdict"><a href="#collections-defaultdict" class="headerlink" title="collections.defaultdict"></a><code>collections.defaultdict</code></h3><p>在实例化一个<code>defaultdict</code>的时候，需要给构造方法提供一个<strong>可调用对象</strong>或者<strong>无参数函数</strong>，这个可调用对象会在<code>__getitem__</code>(例如<code>dd</code>是个<code>defaultdict</code>，当<code>dd[k]</code>时会调用此方法)碰到找不到的键的时候被调用，让<code>__getitem__</code>返回某种默认值。如果在创建<code>defaultdict</code>的时候没有指定可调用对象，查询不存在的键会触发<code>KeyError</code>(这是由于<code>__missing__</code>方法的缘故)。<br>使用一个类型初始化，当访问键值不存在时，默认值为该类型实例。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd = defaultdict(list)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'foo'</span>]</span><br><span class="line">[]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cc = defaultdict(dict)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cc[<span class="string">'foo'</span>]</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>也可以使用不带参数的可调用函数进行初始化，当键值没有指定的时候，可以采用该函数进行初始化<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> collections</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">default_factory</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> <span class="string">'default value'</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = collections.defaultdict(default_factory, foo=<span class="string">'bar'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'d:'</span>, d)</span><br><span class="line">d: defaultdict(&lt;function default_factory at <span class="number">0x7f2c39c04378</span>&gt;, &#123;<span class="string">'foo'</span>: <span class="string">'bar'</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(d[<span class="string">'foo'</span>])</span><br><span class="line">bar</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(d[<span class="string">'bar'</span>])</span><br><span class="line">default value</span><br></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">zero</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ff = defaultdict(zero)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ff[<span class="string">'foo'</span>]</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>简化为：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ee = defaultdict(<span class="keyword">lambda</span> : <span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ee[<span class="string">'foo'</span>]</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<h3 id="OrderedDict"><a href="#OrderedDict" class="headerlink" title="OrderedDict"></a><code>OrderedDict</code></h3><p>字典是哈希表，默认迭代是无序的，如果需要元素按照添加顺序输出结果，可以使用<code>OrderedDict</code>。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od = OrderedDict()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">"a"</span>] = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">"c"</span>] = <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">"b"</span>] = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k, v <span class="keyword">in</span> od.items(): <span class="keyword">print</span> k, v</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">a <span class="number">1</span></span><br><span class="line">c <span class="number">3</span></span><br><span class="line">b <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od.popitem()</span><br><span class="line">(<span class="string">'b'</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od.popitem()</span><br><span class="line">(<span class="string">'c'</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od.popitem()</span><br><span class="line">(<span class="string">'a'</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>因为字典是有序的，因此当使用<code>popitem</code>时，不再是随机弹出</p>
</blockquote>
<h2 id="set"><a href="#set" class="headerlink" title="set"></a><code>set</code></h2><p><code>set</code>方法的<code>pop</code>也是随机弹出的。集合和字典的主键都必须是可哈希类型对象。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = frozenset(<span class="string">'abc'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">frozenset([<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.add(<span class="string">'d'</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'frozenset'</span> object has no attribute <span class="string">'add'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = set(<span class="string">'abc'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.add(<span class="string">'d'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">set([<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>])</span><br></pre></td></tr></table></figure></p>
<p>如果需要将自定义类型放入集合中，需要保证<code>hash</code>和<code>equal</code>的结果都相同才行：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hash__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> hash(self.name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        cls = type(self)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> other <span class="keyword">or</span> <span class="keyword">not</span> isinstance(other, cls):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> self.name == other.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = set()</span><br><span class="line">s.add(User(<span class="string">'tom'</span>))</span><br><span class="line">s.add(User(<span class="string">'tom'</span>))</span><br><span class="line"><span class="keyword">print</span> s</span><br></pre></td></tr></table></figure></p>
<h2 id="list"><a href="#list" class="headerlink" title="list"></a><code>list</code></h2><p>对于频繁增删元素的大型列表，应该考虑使用链表或者迭代器创建列表对象的方法(<code>itertools</code>)。某些时候，可以考虑用数组(<code>array</code>)代替列表，但是它只能放指定的数据类型：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> array</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = array.array(<span class="string">"l"</span>, range(<span class="number">10</span>)) <span class="comment"># 创建一个long类型的数组</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array(<span class="string">'l'</span>, [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.tolist()   <span class="comment">#转化为list</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = array.array(<span class="string">"c"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.fromstring(<span class="string">"abc"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array(<span class="string">'c'</span>, <span class="string">'abc'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.fromlist(list(<span class="string">"def"</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array(<span class="string">'c'</span>, <span class="string">'abcdef'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.extend(array.array(<span class="string">"c"</span>, <span class="string">"xyz"</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array(<span class="string">'c'</span>, <span class="string">'abcdefxyz'</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="向有序列表插入元素"><a href="#向有序列表插入元素" class="headerlink" title="向有序列表插入元素"></a>向有序列表插入元素</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="string">"a"</span>, <span class="string">"d"</span>, <span class="string">"c"</span>, <span class="string">"e"</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bisect.insort(l, <span class="string">"b"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]</span><br></pre></td></tr></table></figure>
<h2 id="Tuple"><a href="#Tuple" class="headerlink" title="Tuple"></a><code>Tuple</code></h2><p>在对<code>tuple</code>进行比较的时候，<code>Python</code>会优先比较元组中下标为<code>0</code>的元素，然后依次递增。有个很神奇的例子：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>values = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">9</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>group = [<span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">sort_priority</span><span class="params">(values, group)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(x)</span>:</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">if</span> x <span class="keyword">in</span> group:</span><br><span class="line"><span class="meta">... </span>            <span class="keyword">return</span> (<span class="number">0</span>, x)</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> (<span class="number">1</span>, x)</span><br><span class="line"><span class="meta">... </span>    values.sort(key=helper)</span><br><span class="line"><span class="meta">... </span>    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sort_priority(values, group)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(values)</span><br><span class="line">[<span class="number">7</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure></p>
<h3 id="namedtuple"><a href="#namedtuple" class="headerlink" title="namedtuple"></a><code>namedtuple</code></h3><p>需要两个参数，一个是类名，另一个是类的各个字段的名字。后者可以是由数个字符串组成的可迭代对象，或者是由空格分隔开的字段名组成的字符串。</p>
<blockquote>
<p>继承自<code>tuple</code>的子类，创建的对象拥有可以访问的属性，但是仍然是只读的。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>TPoint = namedtuple(<span class="string">'TPoint'</span>, [<span class="string">'x'</span>, <span class="string">'y'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = TPoint(x=<span class="number">10</span>, y=<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.x, p.y</span><br><span class="line">(<span class="number">10</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>也可以使用<code>TPoint = namedtuple(&#39;TPoint&#39;, &#39;x y&#39;)</code>这种格式</p>
</blockquote>
<ul>
<li><p>将数据变为<code>namedtuple</code>类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>TPoint = namedtuple(<span class="string">'TPoint'</span>, [<span class="string">'x'</span>, <span class="string">'y'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = [<span class="number">11</span> , <span class="number">22</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = TPoint._make(t)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p</span><br><span class="line">TPoint(x=<span class="number">11</span>, y=<span class="number">22</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.x</span><br><span class="line"><span class="number">11</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果要进行更新，需要调用方法<code>_replace</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p</span><br><span class="line">TPoint(x=<span class="number">10</span>, y=<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.y = <span class="number">33</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;input&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: can<span class="string">'t set attribute</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; p._replace(y=33)</span></span><br><span class="line"><span class="string">TPoint(x=10, y=33)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将字典数据转换成<code>namedtuple</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = &#123;<span class="string">'x'</span>: <span class="number">44</span>, <span class="string">'y'</span>: <span class="number">55</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = TPoint(**p)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p</span><br><span class="line">TPoint(x=<span class="number">44</span>, y=<span class="number">55</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yuyinzi.github.io/2019/04/10/Python拾遗-2/" data-id="cjvjllxsh00181x8zyvlmjxty" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>

    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2019/04/11/Django源码分析/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Django源码分析
        
      </div>
    </a>
  
  
    <a href="/2019/04/10/Python拾遗-1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Python拾遗(1)</div>
    </a>
  
</nav>

  
</article>
 
   <!-- 
  <div class="comments" id="comments">
    
     
       
       
      
      
  </div>
  -->
  

</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#int"><span class="toc-number">1.</span> <span class="toc-text">int</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#float"><span class="toc-number">2.</span> <span class="toc-text">float</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#string"><span class="toc-number">3.</span> <span class="toc-text">string</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#不太熟的方法"><span class="toc-number">3.1.</span> <span class="toc-text">不太熟的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符编码"><span class="toc-number">3.2.</span> <span class="toc-text">字符编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#string-ascii-letters-digits"><span class="toc-number">3.3.</span> <span class="toc-text">string.ascii_letters/digits</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#池化"><span class="toc-number">3.3.1.</span> <span class="toc-text">池化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dict"><span class="toc-number">4.</span> <span class="toc-text">dict</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#视图"><span class="toc-number">4.1.</span> <span class="toc-text">视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collections-defaultdict"><span class="toc-number">4.2.</span> <span class="toc-text">collections.defaultdict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OrderedDict"><span class="toc-number">4.3.</span> <span class="toc-text">OrderedDict</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set"><span class="toc-number">5.</span> <span class="toc-text">set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#list"><span class="toc-number">6.</span> <span class="toc-text">list</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#向有序列表插入元素"><span class="toc-number">6.1.</span> <span class="toc-text">向有序列表插入元素</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tuple"><span class="toc-number">7.</span> <span class="toc-text">Tuple</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#namedtuple"><span class="toc-number">7.1.</span> <span class="toc-text">namedtuple</span></a></li></ol></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2019 Littlemay&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;littlemay2015@gmail.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png">
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->



 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>